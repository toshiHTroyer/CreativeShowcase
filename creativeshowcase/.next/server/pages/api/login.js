"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/login";
exports.ids = ["pages/api/login"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Flogin.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Flogin.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/login.js */ \"(api-node)/./src/pages/api/login.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/login\",\n        pathname: \"/api/login\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_login_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGbG9naW4mcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZzcmMlMkZwYWdlcyUyRmFwaSUyRmxvZ2luLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ3FEO0FBQ3JEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL2xvZ2luLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9sb2dpblwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2xvZ2luXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Flogin.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/lib/dbConnect.js":
/*!******************************!*\
  !*** ./src/lib/dbConnect.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ dbConnect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_1__);\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_1___default().config({\n    path: '.env.local'\n});\nconst MONGODB_URI = process.env.DSN;\nif (!MONGODB_URI) throw new Error('MONGODB_URI is not defined in .env.local');\nlet cached = global.mongoose || {\n    conn: null,\n    promise: null\n};\nasync function dbConnect() {\n    if (cached.conn) return cached.conn;\n    if (!cached.promise) {\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI);\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvZGJDb25uZWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQWdDO0FBQ0o7QUFDNUJDLG9EQUFhLENBQUM7SUFBRUUsTUFBTTtBQUFhO0FBRW5DLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0MsR0FBRztBQUVuQyxJQUFJLENBQUNILGFBQWEsTUFBTSxJQUFJSSxNQUFNO0FBRWxDLElBQUlDLFNBQVNDLE9BQU9WLFFBQVEsSUFBSTtJQUFFVyxNQUFNO0lBQU1DLFNBQVM7QUFBSztBQUU3QyxlQUFlQztJQUM1QixJQUFJSixPQUFPRSxJQUFJLEVBQUUsT0FBT0YsT0FBT0UsSUFBSTtJQUNuQyxJQUFJLENBQUNGLE9BQU9HLE9BQU8sRUFBRTtRQUNuQkgsT0FBT0csT0FBTyxHQUFHWix1REFBZ0IsQ0FBQ0k7SUFDcEM7SUFDQUssT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDbEMsT0FBT0gsT0FBT0UsSUFBSTtBQUNwQiIsInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvZmluYWwtcHJvamVjdC1kZXBsb3ltZW50LXRvc2hpSFRyb3llci9jcmVhdGl2ZXNob3djYXNlL3NyYy9saWIvZGJDb25uZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5kb3RlbnYuY29uZmlnKHsgcGF0aDogJy5lbnYubG9jYWwnIH0pO1xuXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52LkRTTjtcblxuaWYgKCFNT05HT0RCX1VSSSkgdGhyb3cgbmV3IEVycm9yKCdNT05HT0RCX1VSSSBpcyBub3QgZGVmaW5lZCBpbiAuZW52LmxvY2FsJyk7XG5cbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgfHwgeyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpIHtcbiAgaWYgKGNhY2hlZC5jb25uKSByZXR1cm4gY2FjaGVkLmNvbm47XG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkpO1xuICB9XG4gIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XG4gIHJldHVybiBjYWNoZWQuY29ubjtcbn0iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJkb3RlbnYiLCJjb25maWciLCJwYXRoIiwiTU9OR09EQl9VUkkiLCJwcm9jZXNzIiwiZW52IiwiRFNOIiwiRXJyb3IiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsImNvbm5lY3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/dbConnect.js\n");

/***/ }),

/***/ "(api-node)/./src/lib/passport.js":
/*!*****************************!*\
  !*** ./src/lib/passport.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! passport */ \"passport\");\n/* harmony import */ var passport__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(passport__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! passport-local */ \"passport-local\");\n/* harmony import */ var passport_local__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(passport_local__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _models_db_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../models/db.js */ \"(api-node)/./src/models/db.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\npassport__WEBPACK_IMPORTED_MODULE_0___default().use(new passport_local__WEBPACK_IMPORTED_MODULE_1__.Strategy({\n    usernameField: 'username',\n    passwordField: 'password'\n}, async (username, password, done)=>{\n    try {\n        const user = await _models_db_js__WEBPACK_IMPORTED_MODULE_2__.User.findOne({\n            userName: username\n        });\n        if (!user) return done(null, false);\n        const match = await bcrypt__WEBPACK_IMPORTED_MODULE_3___default().compare(password, user.password);\n        if (!match) return done(null, false);\n        done(null, user);\n    } catch (err) {\n        done(err);\n    }\n}));\npassport__WEBPACK_IMPORTED_MODULE_0___default().serializeUser((user, done)=>done(null, user.id));\npassport__WEBPACK_IMPORTED_MODULE_0___default().deserializeUser(async (id, done)=>{\n    try {\n        const user = await _models_db_js__WEBPACK_IMPORTED_MODULE_2__.User.findById(id);\n        done(null, user);\n    } catch (err) {\n        done(err);\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((passport__WEBPACK_IMPORTED_MODULE_0___default()));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvcGFzc3BvcnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBZ0M7QUFDMkI7QUFDcEI7QUFDWDtBQUU1QkEsbURBQVksQ0FBQyxJQUFJRSxvREFBYUEsQ0FDNUI7SUFBRUksZUFBZTtJQUFZQyxlQUFlO0FBQVcsR0FDdkQsT0FBT0MsVUFBVUMsVUFBVUM7SUFDekIsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTVIsK0NBQUlBLENBQUNTLE9BQU8sQ0FBQztZQUFFQyxVQUFVTDtRQUFTO1FBQ3JELElBQUksQ0FBQ0csTUFBTSxPQUFPRCxLQUFLLE1BQU07UUFFN0IsTUFBTUksUUFBUSxNQUFNVixxREFBYyxDQUFDSyxVQUFVRSxLQUFLRixRQUFRO1FBQzFELElBQUksQ0FBQ0ssT0FBTyxPQUFPSixLQUFLLE1BQU07UUFFOUJBLEtBQUssTUFBTUM7SUFDYixFQUFFLE9BQU9LLEtBQUs7UUFDWk4sS0FBS007SUFDUDtBQUNGO0FBR0ZoQiw2REFBc0IsQ0FBQyxDQUFDVyxNQUFNRCxPQUFTQSxLQUFLLE1BQU1DLEtBQUtPLEVBQUU7QUFDekRsQiwrREFBd0IsQ0FBQyxPQUFPa0IsSUFBSVI7SUFDbEMsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTVIsK0NBQUlBLENBQUNpQixRQUFRLENBQUNGO1FBQ2pDUixLQUFLLE1BQU1DO0lBQ2IsRUFBRSxPQUFPSyxLQUFLO1FBQ1pOLEtBQUtNO0lBQ1A7QUFDRjtBQUVBLGlFQUFlaEIsaURBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL2ZpbmFsLXByb2plY3QtZGVwbG95bWVudC10b3NoaUhUcm95ZXIvY3JlYXRpdmVzaG93Y2FzZS9zcmMvbGliL3Bhc3Nwb3J0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXNzcG9ydCBmcm9tICdwYXNzcG9ydCc7XG5pbXBvcnQgeyBTdHJhdGVneSBhcyBMb2NhbFN0cmF0ZWd5IH0gZnJvbSAncGFzc3BvcnQtbG9jYWwnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL21vZGVscy9kYi5qcyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG5cbnBhc3Nwb3J0LnVzZShuZXcgTG9jYWxTdHJhdGVneShcbiAgeyB1c2VybmFtZUZpZWxkOiAndXNlcm5hbWUnLCBwYXNzd29yZEZpZWxkOiAncGFzc3dvcmQnIH0sXG4gIGFzeW5jICh1c2VybmFtZSwgcGFzc3dvcmQsIGRvbmUpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJOYW1lOiB1c2VybmFtZSB9KTtcbiAgICAgIGlmICghdXNlcikgcmV0dXJuIGRvbmUobnVsbCwgZmFsc2UpO1xuICAgICAgXG4gICAgICBjb25zdCBtYXRjaCA9IGF3YWl0IGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICAgIGlmICghbWF0Y2gpIHJldHVybiBkb25lKG51bGwsIGZhbHNlKTtcbiAgICAgIFxuICAgICAgZG9uZShudWxsLCB1c2VyKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGRvbmUoZXJyKTtcbiAgICB9XG4gIH1cbikpO1xuXG5wYXNzcG9ydC5zZXJpYWxpemVVc2VyKCh1c2VyLCBkb25lKSA9PiBkb25lKG51bGwsIHVzZXIuaWQpKTtcbnBhc3Nwb3J0LmRlc2VyaWFsaXplVXNlcihhc3luYyAoaWQsIGRvbmUpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChpZCk7XG4gICAgZG9uZShudWxsLCB1c2VyKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZG9uZShlcnIpO1xuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcGFzc3BvcnQ7Il0sIm5hbWVzIjpbInBhc3Nwb3J0IiwiU3RyYXRlZ3kiLCJMb2NhbFN0cmF0ZWd5IiwiVXNlciIsImJjcnlwdCIsInVzZSIsInVzZXJuYW1lRmllbGQiLCJwYXNzd29yZEZpZWxkIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImRvbmUiLCJ1c2VyIiwiZmluZE9uZSIsInVzZXJOYW1lIiwibWF0Y2giLCJjb21wYXJlIiwiZXJyIiwic2VyaWFsaXplVXNlciIsImlkIiwiZGVzZXJpYWxpemVVc2VyIiwiZmluZEJ5SWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/passport.js\n");

/***/ }),

/***/ "(api-node)/./src/lib/session.js":
/*!****************************!*\
  !*** ./src/lib/session.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sessionOptions: () => (/* binding */ sessionOptions)\n/* harmony export */ });\n/* harmony import */ var express_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express-session */ \"express-session\");\n/* harmony import */ var express_session__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express_session__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! connect-mongo */ \"connect-mongo\");\n/* harmony import */ var connect_mongo__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(connect_mongo__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst sessionOptions = express_session__WEBPACK_IMPORTED_MODULE_0___default()({\n    secret: process.env.SESSION_SECRET || 'fallback-secret',\n    resave: false,\n    saveUninitialized: false,\n    store: connect_mongo__WEBPACK_IMPORTED_MODULE_1___default().create({\n        mongoUrl: process.env.DSN\n    })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvc2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNDO0FBRWhDLE1BQU1FLGlCQUFpQkYsc0RBQU9BLENBQUM7SUFDcENHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYyxJQUFJO0lBQ3RDQyxRQUFRO0lBQ1JDLG1CQUFtQjtJQUNuQkMsT0FBT1IsMkRBQWlCLENBQUM7UUFBRVUsVUFBVVAsUUFBUUMsR0FBRyxDQUFDTyxHQUFHO0lBQUM7QUFDdkQsR0FBRyIsInNvdXJjZXMiOlsiL3dvcmtzcGFjZXMvZmluYWwtcHJvamVjdC1kZXBsb3ltZW50LXRvc2hpSFRyb3llci9jcmVhdGl2ZXNob3djYXNlL3NyYy9saWIvc2Vzc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2Vzc2lvbiBmcm9tICdleHByZXNzLXNlc3Npb24nO1xuaW1wb3J0IE1vbmdvU3RvcmUgZnJvbSAnY29ubmVjdC1tb25nbyc7XG5cbmV4cG9ydCBjb25zdCBzZXNzaW9uT3B0aW9ucyA9IHNlc3Npb24oe1xuICBzZWNyZXQ6IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUIHx8ICdmYWxsYmFjay1zZWNyZXQnLFxuICByZXNhdmU6IGZhbHNlLFxuICBzYXZlVW5pbml0aWFsaXplZDogZmFsc2UsXG4gIHN0b3JlOiBNb25nb1N0b3JlLmNyZWF0ZSh7IG1vbmdvVXJsOiBwcm9jZXNzLmVudi5EU04gfSksXG59KTsiXSwibmFtZXMiOlsic2Vzc2lvbiIsIk1vbmdvU3RvcmUiLCJzZXNzaW9uT3B0aW9ucyIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJTRVNTSU9OX1NFQ1JFVCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic3RvcmUiLCJjcmVhdGUiLCJtb25nb1VybCIsIkRTTiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/session.js\n");

/***/ }),

/***/ "(api-node)/./src/models/db.js":
/*!**************************!*\
  !*** ./src/models/db.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Category: () => (/* binding */ Category),\n/* harmony export */   Portfolio: () => (/* binding */ Portfolio),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nif (!(mongoose__WEBPACK_IMPORTED_MODULE_0___default().connection).readyState) {\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.DSN);\n}\n// User Schema with reference to Portfolio\nconst UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    userName: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    portfolio: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Portfolio'\n    }\n});\n// Portfolio Schema with embedded settings, array of references to its categories\nconst PortfolioSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    user: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    bio: String,\n    specialty: String,\n    coverImage: String,\n    url: {\n        type: String,\n        required: true\n    },\n    portfolioSettings: {\n        isPublic: {\n            type: Boolean,\n            default: true\n        },\n        customColorScheme: {\n            primary: String,\n            secondary: String,\n            accent: String\n        }\n    },\n    categories: [\n        {\n            type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n            ref: 'Category'\n        }\n    ]\n});\n// Category Schema with embedded projects\nconst CategorySchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    user: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    portfolio: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: 'Portfolio',\n        required: true\n    },\n    name: {\n        type: String,\n        required: true\n    },\n    projects: [\n        {\n            title: {\n                type: String,\n                required: true\n            },\n            description: String,\n            projectContent: {\n                contentType: String,\n                content: {\n                    type: String,\n                    required: true\n                },\n                caption: String\n            },\n            createdAt: {\n                type: Date,\n                default: Date.now\n            },\n            updatedAt: {\n                type: Date,\n                default: Date.now\n            }\n        }\n    ]\n}, {\n    timestamps: true\n});\nconst User = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User', UserSchema);\nconst Portfolio = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Portfolio || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Portfolio', PortfolioSchema);\nconst Category = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Category || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('Category', CategorySchema);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9tb2RlbHMvZGIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBZ0M7QUFFaEMsSUFBSSxDQUFDQSw0REFBbUIsQ0FBQ0UsVUFBVSxFQUFFO0lBQ25DRix1REFBZ0IsQ0FBQ0ksUUFBUUMsR0FBRyxDQUFDQyxHQUFHO0FBQ2xDO0FBRUEsMENBQTBDO0FBQzFDLE1BQU1DLGFBQWEsSUFBSVAsd0RBQWUsQ0FBQztJQUNyQ1MsVUFBVTtRQUFFQyxNQUFNQztRQUFRQyxVQUFVO1FBQU1DLFFBQVE7SUFBSztJQUN2REMsVUFBVTtRQUFFSixNQUFNQztRQUFRQyxVQUFVO0lBQUs7SUFDekNHLE9BQU87UUFBRUwsTUFBTUM7UUFBUUMsVUFBVTtRQUFNQyxRQUFRO0lBQUs7SUFDcERHLFdBQVc7UUFBRU4sTUFBTVYsd0RBQWUsQ0FBQ2lCLEtBQUssQ0FBQ0MsUUFBUTtRQUFFQyxLQUFLO0lBQVk7QUFDdEU7QUFHQSxpRkFBaUY7QUFDakYsTUFBTUMsa0JBQWtCLElBQUlwQix3REFBZSxDQUFDO0lBQzFDcUIsTUFBTTtRQUFFWCxNQUFNVix3REFBZSxDQUFDaUIsS0FBSyxDQUFDQyxRQUFRO1FBQUVDLEtBQUs7UUFBUVAsVUFBVTtJQUFLO0lBQzFFVSxLQUFLWDtJQUNMWSxXQUFXWjtJQUNYYSxZQUFZYjtJQUNaYyxLQUFLO1FBQUVmLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNwQ2MsbUJBQW1CO1FBQ2pCQyxVQUFVO1lBQUVqQixNQUFNa0I7WUFBU0MsU0FBUztRQUFLO1FBQ3pDQyxtQkFBbUI7WUFDakJDLFNBQVNwQjtZQUNUcUIsV0FBV3JCO1lBQ1hzQixRQUFRdEI7UUFDVjtJQUNGO0lBQ0F1QixZQUFZO1FBQUM7WUFBRXhCLE1BQU1WLHdEQUFlLENBQUNpQixLQUFLLENBQUNDLFFBQVE7WUFBRUMsS0FBSztRQUFXO0tBQUU7QUFDekU7QUFFQSx5Q0FBeUM7QUFDekMsTUFBTWdCLGlCQUFpQixJQUFJbkMsd0RBQWUsQ0FBQztJQUN6Q3FCLE1BQU07UUFBRVgsTUFBTVYsd0RBQWUsQ0FBQ2lCLEtBQUssQ0FBQ0MsUUFBUTtRQUFFQyxLQUFLO1FBQVFQLFVBQVU7SUFBSztJQUMxRUksV0FBVztRQUFFTixNQUFNVix3REFBZSxDQUFDaUIsS0FBSyxDQUFDQyxRQUFRO1FBQUVDLEtBQUs7UUFBYVAsVUFBVTtJQUFLO0lBQ3BGd0IsTUFBTTtRQUFFMUIsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3JDeUIsVUFBVTtRQUFDO1lBQ1RDLE9BQU87Z0JBQUU1QixNQUFNQztnQkFBUUMsVUFBVTtZQUFLO1lBQ3RDMkIsYUFBYTVCO1lBQ2I2QixnQkFBZ0I7Z0JBQ2RDLGFBQWE5QjtnQkFDYitCLFNBQVM7b0JBQUVoQyxNQUFNQztvQkFBUUMsVUFBVTtnQkFBSztnQkFDeEMrQixTQUFTaEM7WUFDWDtZQUNBaUMsV0FBVztnQkFBRWxDLE1BQU1tQztnQkFBTWhCLFNBQVNnQixLQUFLQyxHQUFHO1lBQUM7WUFDM0NDLFdBQVc7Z0JBQUVyQyxNQUFNbUM7Z0JBQU1oQixTQUFTZ0IsS0FBS0MsR0FBRztZQUFDO1FBQzdDO0tBQUU7QUFDSixHQUFHO0lBQUVFLFlBQVk7QUFBSztBQUV0QixNQUFNQyxPQUFPakQsd0RBQWUsQ0FBQ2lELElBQUksSUFBSWpELHFEQUFjLENBQUMsUUFBUU87QUFDNUQsTUFBTTZDLFlBQVlwRCx3REFBZSxDQUFDb0QsU0FBUyxJQUFJcEQscURBQWMsQ0FBQyxhQUFhb0I7QUFDM0UsTUFBTWlDLFdBQVdyRCx3REFBZSxDQUFDcUQsUUFBUSxJQUFJckQscURBQWMsQ0FBQyxZQUFZbUM7QUFFbkMiLCJzb3VyY2VzIjpbIi93b3Jrc3BhY2VzL2ZpbmFsLXByb2plY3QtZGVwbG95bWVudC10b3NoaUhUcm95ZXIvY3JlYXRpdmVzaG93Y2FzZS9zcmMvbW9kZWxzL2RiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmlmICghbW9uZ29vc2UuY29ubmVjdGlvbi5yZWFkeVN0YXRlKSB7XG4gIG1vbmdvb3NlLmNvbm5lY3QocHJvY2Vzcy5lbnYuRFNOKTtcbn1cblxuLy8gVXNlciBTY2hlbWEgd2l0aCByZWZlcmVuY2UgdG8gUG9ydGZvbGlvXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXJOYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBwYXNzd29yZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGVtYWlsOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBwb3J0Zm9saW86IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdQb3J0Zm9saW8nIH1cbn0pO1xuXG5cbi8vIFBvcnRmb2xpbyBTY2hlbWEgd2l0aCBlbWJlZGRlZCBzZXR0aW5ncywgYXJyYXkgb2YgcmVmZXJlbmNlcyB0byBpdHMgY2F0ZWdvcmllc1xuY29uc3QgUG9ydGZvbGlvU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHVzZXI6IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgYmlvOiBTdHJpbmcsXG4gIHNwZWNpYWx0eTogU3RyaW5nLFxuICBjb3ZlckltYWdlOiBTdHJpbmcsXG4gIHVybDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHBvcnRmb2xpb1NldHRpbmdzOiB7XG4gICAgaXNQdWJsaWM6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIGN1c3RvbUNvbG9yU2NoZW1lOiB7XG4gICAgICBwcmltYXJ5OiBTdHJpbmcsXG4gICAgICBzZWNvbmRhcnk6IFN0cmluZyxcbiAgICAgIGFjY2VudDogU3RyaW5nLFxuICAgIH1cbiAgfSxcbiAgY2F0ZWdvcmllczogW3sgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdDYXRlZ29yeScgfV1cbn0pO1xuXG4vLyBDYXRlZ29yeSBTY2hlbWEgd2l0aCBlbWJlZGRlZCBwcm9qZWN0c1xuY29uc3QgQ2F0ZWdvcnlTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgdXNlcjogeyB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsIHJlZjogJ1VzZXInLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBwb3J0Zm9saW86IHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdQb3J0Zm9saW8nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBuYW1lOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcHJvamVjdHM6IFt7XG4gICAgdGl0bGU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGRlc2NyaXB0aW9uOiBTdHJpbmcsXG4gICAgcHJvamVjdENvbnRlbnQ6IHtcbiAgICAgIGNvbnRlbnRUeXBlOiBTdHJpbmcsXG4gICAgICBjb250ZW50OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICAgIGNhcHRpb246IFN0cmluZyxcbiAgICB9LFxuICAgIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICAgIHVwZGF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XG4gIH1dXG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbmNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbHMuVXNlciB8fCBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpO1xuY29uc3QgUG9ydGZvbGlvID0gbW9uZ29vc2UubW9kZWxzLlBvcnRmb2xpbyB8fCBtb25nb29zZS5tb2RlbCgnUG9ydGZvbGlvJywgUG9ydGZvbGlvU2NoZW1hKTtcbmNvbnN0IENhdGVnb3J5ID0gbW9uZ29vc2UubW9kZWxzLkNhdGVnb3J5IHx8IG1vbmdvb3NlLm1vZGVsKCdDYXRlZ29yeScsIENhdGVnb3J5U2NoZW1hKTtcblxuZXhwb3J0IHsgVXNlciwgUG9ydGZvbGlvLCBDYXRlZ29yeSB9OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsImNvbm5lY3Rpb24iLCJyZWFkeVN0YXRlIiwiY29ubmVjdCIsInByb2Nlc3MiLCJlbnYiLCJEU04iLCJVc2VyU2NoZW1hIiwiU2NoZW1hIiwidXNlck5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJwYXNzd29yZCIsImVtYWlsIiwicG9ydGZvbGlvIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsIlBvcnRmb2xpb1NjaGVtYSIsInVzZXIiLCJiaW8iLCJzcGVjaWFsdHkiLCJjb3ZlckltYWdlIiwidXJsIiwicG9ydGZvbGlvU2V0dGluZ3MiLCJpc1B1YmxpYyIsIkJvb2xlYW4iLCJkZWZhdWx0IiwiY3VzdG9tQ29sb3JTY2hlbWUiLCJwcmltYXJ5Iiwic2Vjb25kYXJ5IiwiYWNjZW50IiwiY2F0ZWdvcmllcyIsIkNhdGVnb3J5U2NoZW1hIiwibmFtZSIsInByb2plY3RzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInByb2plY3RDb250ZW50IiwiY29udGVudFR5cGUiLCJjb250ZW50IiwiY2FwdGlvbiIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJ1cGRhdGVkQXQiLCJ0aW1lc3RhbXBzIiwiVXNlciIsIm1vZGVscyIsIm1vZGVsIiwiUG9ydGZvbGlvIiwiQ2F0ZWdvcnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/models/db.js\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/login.js":
/*!********************************!*\
  !*** ./src/pages/api/login.js ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_connect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-connect */ \"next-connect\");\n/* harmony import */ var _lib_dbConnect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/dbConnect.js */ \"(api-node)/./src/lib/dbConnect.js\");\n/* harmony import */ var _lib_session_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/session.js */ \"(api-node)/./src/lib/session.js\");\n/* harmony import */ var _lib_passport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/passport.js */ \"(api-node)/./src/lib/passport.js\");\n/* harmony import */ var _models_db_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../models/db.js */ \"(api-node)/./src/models/db.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([next_connect__WEBPACK_IMPORTED_MODULE_0__]);\nnext_connect__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nconst handler = (0,next_connect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\nhandler.use(_lib_session_js__WEBPACK_IMPORTED_MODULE_2__.sessionOptions);\nhandler.use(_lib_passport_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].initialize());\nhandler.use(_lib_passport_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].session());\nhandler.post(async (req, res, next)=>{\n    await (0,_lib_dbConnect_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    _lib_passport_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].authenticate('local', async (err, user)=>{\n        if (err || !user) return res.status(401).json({\n            error: 'Invalid credentials'\n        });\n        req.logIn(user, async (err)=>{\n            if (err) return res.status(500).json({\n                error: 'Login failed'\n            });\n            const fullUser = await _models_db_js__WEBPACK_IMPORTED_MODULE_4__.User.findById(user._id).populate('portfolio');\n            if (!fullUser?.portfolio) return res.status(404).json({\n                error: 'Portfolio not found'\n            });\n            res.status(200).json({\n                success: true,\n                user: {\n                    userName: fullUser.userName,\n                    email: fullUser.email,\n                    portfolioUrl: fullUser.portfolio.url\n                }\n            });\n        });\n    })(req, res, next);\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvbG9naW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQXVDO0FBQ1E7QUFDTztBQUNUO0FBQ1E7QUFFckQsTUFBTU0sVUFBVU4sd0RBQVdBO0FBRTNCTSxRQUFRQyxHQUFHLENBQUNMLDJEQUFjQTtBQUMxQkksUUFBUUMsR0FBRyxDQUFDSixtRUFBbUI7QUFDL0JHLFFBQVFDLEdBQUcsQ0FBQ0osZ0VBQWdCO0FBRTVCRyxRQUFRSSxJQUFJLENBQUMsT0FBT0MsS0FBS0MsS0FBS0M7SUFDNUIsTUFBTVosNkRBQVNBO0lBRWZFLHFFQUFxQixDQUFDLFNBQVMsT0FBT1ksS0FBS0M7UUFDekMsSUFBSUQsT0FBTyxDQUFDQyxNQUFNLE9BQU9KLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFzQjtRQUU3RVIsSUFBSVMsS0FBSyxDQUFDSixNQUFNLE9BQU9EO1lBQ3JCLElBQUlBLEtBQUssT0FBT0gsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlO1lBRTdELE1BQU1FLFdBQVcsTUFBTWpCLCtDQUFJQSxDQUFDa0IsUUFBUSxDQUFDTixLQUFLTyxHQUFHLEVBQUVDLFFBQVEsQ0FBQztZQUN4RCxJQUFJLENBQUNILFVBQVVJLFdBQVcsT0FBT2IsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFzQjtZQUVyRlAsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJRLFNBQVM7Z0JBQ1RWLE1BQU07b0JBQ0pXLFVBQVVOLFNBQVNNLFFBQVE7b0JBQzNCQyxPQUFPUCxTQUFTTyxLQUFLO29CQUNyQkMsY0FBY1IsU0FBU0ksU0FBUyxDQUFDSyxHQUFHO2dCQUN0QztZQUNGO1FBQ0Y7SUFDRixHQUFHbkIsS0FBS0MsS0FBS0M7QUFDZjtBQUVBLGlFQUFlUCxPQUFPQSxFQUFDIiwic291cmNlcyI6WyIvd29ya3NwYWNlcy9maW5hbC1wcm9qZWN0LWRlcGxveW1lbnQtdG9zaGlIVHJveWVyL2NyZWF0aXZlc2hvd2Nhc2Uvc3JjL3BhZ2VzL2FwaS9sb2dpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbmV4dENvbm5lY3QgZnJvbSAnbmV4dC1jb25uZWN0JztcbmltcG9ydCBkYkNvbm5lY3QgZnJvbSAnLi4vLi4vbGliL2RiQ29ubmVjdC5qcyc7XG5pbXBvcnQgeyBzZXNzaW9uT3B0aW9ucyB9IGZyb20gJy4uLy4uL2xpYi9zZXNzaW9uLmpzJztcbmltcG9ydCBwYXNzcG9ydCBmcm9tICcuLi8uLi9saWIvcGFzc3BvcnQuanMnO1xuaW1wb3J0IHsgVXNlciwgUG9ydGZvbGlvIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2RiLmpzJztcblxuY29uc3QgaGFuZGxlciA9IG5leHRDb25uZWN0KCk7XG5cbmhhbmRsZXIudXNlKHNlc3Npb25PcHRpb25zKTtcbmhhbmRsZXIudXNlKHBhc3Nwb3J0LmluaXRpYWxpemUoKSk7XG5oYW5kbGVyLnVzZShwYXNzcG9ydC5zZXNzaW9uKCkpO1xuXG5oYW5kbGVyLnBvc3QoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGF3YWl0IGRiQ29ubmVjdCgpO1xuXG4gIHBhc3Nwb3J0LmF1dGhlbnRpY2F0ZSgnbG9jYWwnLCBhc3luYyAoZXJyLCB1c2VyKSA9PiB7XG4gICAgaWYgKGVyciB8fCAhdXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJyB9KTtcblxuICAgIHJlcS5sb2dJbih1c2VyLCBhc3luYyAoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyKSByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0xvZ2luIGZhaWxlZCcgfSk7XG5cbiAgICAgIGNvbnN0IGZ1bGxVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VyLl9pZCkucG9wdWxhdGUoJ3BvcnRmb2xpbycpO1xuICAgICAgaWYgKCFmdWxsVXNlcj8ucG9ydGZvbGlvKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ1BvcnRmb2xpbyBub3QgZm91bmQnIH0pO1xuXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICB1c2VyTmFtZTogZnVsbFVzZXIudXNlck5hbWUsXG4gICAgICAgICAgZW1haWw6IGZ1bGxVc2VyLmVtYWlsLFxuICAgICAgICAgIHBvcnRmb2xpb1VybDogZnVsbFVzZXIucG9ydGZvbGlvLnVybFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSkocmVxLCByZXMsIG5leHQpO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7Il0sIm5hbWVzIjpbIm5leHRDb25uZWN0IiwiZGJDb25uZWN0Iiwic2Vzc2lvbk9wdGlvbnMiLCJwYXNzcG9ydCIsIlVzZXIiLCJQb3J0Zm9saW8iLCJoYW5kbGVyIiwidXNlIiwiaW5pdGlhbGl6ZSIsInNlc3Npb24iLCJwb3N0IiwicmVxIiwicmVzIiwibmV4dCIsImF1dGhlbnRpY2F0ZSIsImVyciIsInVzZXIiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJsb2dJbiIsImZ1bGxVc2VyIiwiZmluZEJ5SWQiLCJfaWQiLCJwb3B1bGF0ZSIsInBvcnRmb2xpbyIsInN1Y2Nlc3MiLCJ1c2VyTmFtZSIsImVtYWlsIiwicG9ydGZvbGlvVXJsIiwidXJsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/login.js\n");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "connect-mongo":
/*!********************************!*\
  !*** external "connect-mongo" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("connect-mongo");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "express-session":
/*!**********************************!*\
  !*** external "express-session" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("express-session");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-connect":
/*!*******************************!*\
  !*** external "next-connect" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("next-connect");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "passport":
/*!***************************!*\
  !*** external "passport" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("passport");

/***/ }),

/***/ "passport-local":
/*!*********************************!*\
  !*** external "passport-local" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("passport-local");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Flogin&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Flogin.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();